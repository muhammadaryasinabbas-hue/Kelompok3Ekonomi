<!DOCTYPE html>
<html>
<head>
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Market</title>
    <link rel="stylesheet" href="style2.css"> 
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>

<body>
    <header>
        <table border="0" cellpadding="0" cellspacing="10" width="100%">
            <tr>
                <td width="20%" align="left">
                    <img src="Logo2.png" alt="Logo Kuantumika" width="250">
                </td>
                <td width="100%" align="right">
                      | <a href="index.html" style="text-decoration: none; color: burlywood;">Home</a> |
                      <a href="Daftar_isi.html" style="text-decoration: none; color: burlywood;">Daftar Isi</a> |
                      <a href="Tips&Trick.html" style="text-decoration: none; color: burlywood;">Tips & Tricks</a> |
                      <a href="Berita_Terkini.html" style="text-decoration: none; color: burlywood;">Breaking News</a> |
                      <a href="ContactUs.html" style="text-decoration: none; color: burlywood;">Contact Us</a> |
                </td>
                <td width="20%"></td>
            </tr>
        </table>
    </header>
    <nav>
        <h2 align="center" style="color: burlywood; font-size: 50px;">
          <b>Live Market</b>
        </h2>
    </nav>
    <br>
<div class="wrap">
<div class="card">
  <h3>IDR / USD</h3>
  <canvas id="c1"></canvas>
  <div class="meta" id="m1"></div>
</div>

<div class="card">
  <h3>JCI Index</h3>
  <canvas id="c2"></canvas>
  <div class="meta" id="m2"></div>
</div>

<div class="card">
  <h3>Bitcoin BTC/IDR</h3>
  <canvas id="c3"></canvas>
  <div class="meta" id="m3"></div>
</div>

</div>

<script>
function createChart(id, color) {
  return new Chart(document.getElementById(id), {
    type: "line",
    data: { labels: [], datasets: [{
      data: [], borderColor: color, backgroundColor: color+"33",
      fill: true, tension: 0.3
    }]},
    options: { plugins:{legend:{display:false}}, scales:{
      x:{ticks:{color:"#aaa"}}, y:{ticks:{color:"#aaa"}}
    }}
  });
}


let c1 = createChart("c1", "#ff6b6b");
let c2 = createChart("c2", "#2dd4bf");
let c3 = createChart("c3", "#fca311");

let v1=15500, v2=6900, v3=110_000_000;

function pushData(chart, meta, val, range){
  let t = new Date().toLocaleTimeString();
  val += (Math.random() - 0.5) * range;

  chart.data.labels.push(t);
  chart.data.datasets[0].data.push(val);

  if(chart.data.labels.length > 20){
    chart.data.labels.shift();
    chart.data.datasets[0].data.shift();
  }

  chart.update();

  let d = chart.data.datasets[0].data;
  document.getElementById(meta).innerText =
    `Open ${d[0].toFixed(2)} | High ${Math.max(...d).toFixed(2)} | Low ${Math.min(...d).toFixed(2)}`;

  return val;
}

setInterval(()=>{
  v1 = pushData(c1,"m1",v1,20);
  v2 = pushData(c2,"m2",v2,30);
  v3 = pushData(c3,"m3",v3,1_000_000);
},1500);
</script>
<footer>
        <center>
            <table width="70%" cellpadding="10">
                <tr>
                    <td width="50%" align="center">
                        <a href="Daftar_isi.html">&larr; Daftar Isi</a>
                    </td>
                    <td width="50%" align="center">
                        <a href="Tips&Trick.html">Tips & Tricks&rarr;</a>
                    </td>
                </tr>
            </table>
        </center>
    </footer>
</body>
</html>